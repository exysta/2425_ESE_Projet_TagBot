<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>2425_ESE_Projet_TagBot: CubeIDE/TagBot/libs/DCMotor_driver.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">2425_ESE_Projet_TagBot<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">This is the documentation for the TagBot CubeIDE project.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('DCMotor__driver_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">DCMotor_driver.h</div></div>
</div><!--header-->
<div class="contents">
<a href="DCMotor__driver_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * DCMotor_driver.h</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> *</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> *  Created on: Dec 13, 2024</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> *      Author: exysta</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> */</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#ifndef DCMOTOR_DRIVER_H_</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#define DCMOTOR_DRIVER_H_</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;tim.h&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;FreeRTOS.h&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;task.h&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">/* Motor Configuration Macros */</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a0e2d750df9008232cafa398d2424b778">   18</a></span><span class="preprocessor">#define MOTOR_LEFT 0                   </span><span class="comment">// Identifier for the left motor</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a9eff471d17bc68f18b14ff75f23aa3bc">   19</a></span><span class="preprocessor">#define MOTOR_RIGHT 1                  </span><span class="comment">// Identifier for the right motor</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a185b4dd6ffe8f2446d26cde1a059f740">   20</a></span><span class="preprocessor">#define MAX_PULSE 6799                 </span><span class="comment">// Maximum pulse width for PWM</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#ac2cd96d53dd3ba6407db6766c3d92b26">   22</a></span><span class="preprocessor">#define MAX_SPEED 100                  </span><span class="comment">// Maximum speed as a percentage</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a7bdb5e01cd2181541bc8e9f6c1188340">   24</a></span><span class="preprocessor">#define POSITIVE_ROTATION 0            </span><span class="comment">// Forward rotation direction</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a52921edf80647205a9414714d11c6038">   25</a></span><span class="preprocessor">#define NEGATIVE_ROTATION 1            </span><span class="comment">// Reverse rotation direction</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment">/* FreeRTOS Task Configuration */</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#aacb9f3693124090e194fa42f4d7a3719">   28</a></span><span class="preprocessor">#define TASK_MOTOR_STACK_DEPTH 256     </span><span class="comment">// Stack size for motor tasks</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a723a4f393484cb3eda63649b5cbab15c">   29</a></span><span class="preprocessor">#define TASK_MOTOR_PRIORITY 11         </span><span class="comment">// Priority for motor tasks</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#abe4780d5ab6124bba635c3050597aebd">   30</a></span><span class="preprocessor">#define TASK_TIMER_PRIORITY 2          </span><span class="comment">// Priority for encoder timer</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="comment">/* Encoder Configuration */</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#ae677140b1327be1d40e1a005765343df">   33</a></span><span class="preprocessor">#define ENCODER_TIMER_MAX_COUNT 65535  </span><span class="comment">// Maximum count value for encoder timer</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a9df7d19ea8a77437b663d33f2b4fffa0">   34</a></span><span class="preprocessor">#define ENCODER_CALLBACK_FREQUENCY 2   </span><span class="comment">// Callback frequency in Hz</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="comment">/* Motor Tuning Parameters */</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a056a9b36ab0c036c4c0f67c1a8d23170">   37</a></span><span class="preprocessor">#define MAGIC_MOTOR_RATIO 0.8f         </span><span class="comment">// Ratio to balance motor speeds</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#af7a8e1221cf3607668c9f85d3bf34d05">   38</a></span><span class="preprocessor">#define MOTOR_PPR 224.4f               </span><span class="comment">// Pulses per revolution for motor encoder</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="comment">/* PID Tuning Constants */</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a6024e0bc7a5cf18791d0f43187872899">   41</a></span><span class="preprocessor">#define PID_Kp 0.904f                  </span><span class="comment">// Proportional gain</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a143b9cdc295c814b393a04c7f85727c8">   42</a></span><span class="preprocessor">#define PID_Ki 326.0f                  </span><span class="comment">// Integral gain</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a2052fae867467b23d3439a913a4c7374">   43</a></span><span class="preprocessor">#define PID_Kd 0.000585f               </span><span class="comment">// Derivative gain</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="comment">/* Measured Maximum Speeds (RPM) */</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a41eb2f3651d907e8ba977ab48da18a0f">   46</a></span><span class="preprocessor">#define MAX_SPEED_LEFT 355             </span><span class="comment">// Maximum RPM for left motor</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#afac35b86bfdd37db5ed6ce093ae79bb7">   47</a></span><span class="preprocessor">#define MAX_SPEED_RIGHT 447            </span><span class="comment">// Maximum RPM for right motor</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="comment">/* Encoder Structure */</span></div>
<div class="foldopen" id="foldopen00050" data-start="{" data-end="};">
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="structEncoder__typedef.html">   50</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structEncoder__typedef.html">Encoder_typedef</a></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>{</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="structEncoder__typedef.html#a5a1c3b3780efba3045829bf319f31a21">   52</a></span>    uint32_t <a class="code hl_variable" href="structEncoder__typedef.html#a5a1c3b3780efba3045829bf319f31a21">measured_rpm</a>;             <span class="comment">// Measured revolutions per minute</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="structEncoder__typedef.html#a208d84c653860e564c9ac25a4d34732e">   53</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structEncoder__typedef.html#a208d84c653860e564c9ac25a4d34732e">measured_rotation_sign</a>;        <span class="comment">// Direction of rotation (-1 or 1)</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="structEncoder__typedef.html#aec1e953fef34b6eaa94d4d18b96ccd1f">   54</a></span>    uint16_t <a class="code hl_variable" href="structEncoder__typedef.html#aec1e953fef34b6eaa94d4d18b96ccd1f">previous_count</a>;           <span class="comment">// Previous encoder count</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="structEncoder__typedef.html#a922111eef7fe2195001f009c725e8fec">   55</a></span>    uint16_t <a class="code hl_variable" href="structEncoder__typedef.html#a922111eef7fe2195001f009c725e8fec">current_count</a>;            <span class="comment">// Current encoder count</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="structEncoder__typedef.html#acca64aa9212a24efa411cd4a2b2f73a3">   56</a></span>    TIM_HandleTypeDef <a class="code hl_variable" href="structEncoder__typedef.html#acca64aa9212a24efa411cd4a2b2f73a3">encoder_timer</a>;   <span class="comment">// Timer handle for encoder</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a918f0616e8ba7540c87c987b737e465a">   57</a></span>} <a class="code hl_typedef" href="DCMotor__driver_8h.html#a918f0616e8ba7540c87c987b737e465a">Encoder_t</a>;</div>
</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="comment">/* Motor Structure */</span></div>
<div class="foldopen" id="foldopen00060" data-start="{" data-end="};">
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="structMotor__typedef.html">   60</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structMotor__typedef.html">Motor_typedef</a></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>{</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#a53f848a9a4da51c49f47e3ceb75c636f">   62</a></span>    uint32_t <a class="code hl_variable" href="structMotor__typedef.html#a53f848a9a4da51c49f47e3ceb75c636f">set_rpm</a>;                  <span class="comment">// Target RPM for the motor</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#a007083cb089e71887fbfbd26abcc35e2">   63</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structMotor__typedef.html#a007083cb089e71887fbfbd26abcc35e2">set_rotation_sign</a>;             <span class="comment">// Target rotation direction</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#a3b544cdad259cf9e69bef2e4a205a468">   64</a></span>    TIM_HandleTypeDef <a class="code hl_variable" href="structMotor__typedef.html#a3b544cdad259cf9e69bef2e4a205a468">motor_timer</a>;     <span class="comment">// Timer handle for motor PWM</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#aad475504ca555839c47b2eb179ffbe61">   65</a></span>    uint32_t <a class="code hl_variable" href="structMotor__typedef.html#aad475504ca555839c47b2eb179ffbe61">FWD_Channel</a>;              <span class="comment">// PWM forward channel</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#a0e428266bbf6976126fb30af3a1f112c">   66</a></span>    uint32_t <a class="code hl_variable" href="structMotor__typedef.html#a0e428266bbf6976126fb30af3a1f112c">REV_Channel</a>;              <span class="comment">// PWM reverse channel</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#a1076f7e891560898cff2078ae6db06b4">   67</a></span>    uint16_t <a class="code hl_variable" href="structMotor__typedef.html#a1076f7e891560898cff2078ae6db06b4">FWD_target_pulse</a>;         <span class="comment">// Target pulse for forward PWM</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#a33663d34dfe9c8c5e831b932ae3dafd4">   68</a></span>    uint16_t <a class="code hl_variable" href="structMotor__typedef.html#a33663d34dfe9c8c5e831b932ae3dafd4">REV_target_pulse</a>;         <span class="comment">// Target pulse for reverse PWM</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#a9afa363700ee1bb8dee2a4052f052d30">   69</a></span>    uint16_t <a class="code hl_variable" href="structMotor__typedef.html#a9afa363700ee1bb8dee2a4052f052d30">FWD_current_pulse</a>;        <span class="comment">// Current pulse for forward PWM</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#adc89a81286c2283a3eb90fcc04be1056">   70</a></span>    uint16_t <a class="code hl_variable" href="structMotor__typedef.html#adc89a81286c2283a3eb90fcc04be1056">REV_current_pulse</a>;        <span class="comment">// Current pulse for reverse PWM</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#acdd5fb16e2dfaed8593fc0ab266ee404">   71</a></span>    <a class="code hl_struct" href="structEncoder__typedef.html">Encoder_t</a> <a class="code hl_variable" href="structMotor__typedef.html#acdd5fb16e2dfaed8593fc0ab266ee404">encoder</a>;                 <span class="comment">// Associated encoder for motor</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno"><a class="line" href="structMotor__typedef.html#a9ded8689a4e3c8bf635962e283ecb6fa">   72</a></span>    uint16_t <a class="code hl_variable" href="structMotor__typedef.html#a9ded8689a4e3c8bf635962e283ecb6fa">max_speed</a>;                <span class="comment">// Maximum RPM for motor</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#a1a35c47ab80511f4ca296f7b278df9dd">   73</a></span>} <a class="code hl_typedef" href="DCMotor__driver_8h.html#a1a35c47ab80511f4ca296f7b278df9dd">Motor_t</a>;</div>
</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="comment">/* Dual Drive Structure */</span></div>
<div class="foldopen" id="foldopen00076" data-start="{" data-end="};">
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="structDualDrive__handle__typed.html">   76</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structDualDrive__handle__typed.html">DualDrive_handle_typed</a></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>{</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="structDualDrive__handle__typed.html#aafcda8b5aeeed7e4d5fba443b297a540">   78</a></span>    <a class="code hl_struct" href="structMotor__typedef.html">Motor_t</a> <a class="code hl_variable" href="structDualDrive__handle__typed.html#aafcda8b5aeeed7e4d5fba443b297a540">motor_left</a>;                <span class="comment">// Left motor configuration</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="structDualDrive__handle__typed.html#a65321ba986f2339ebd0ce0880623eeef">   79</a></span>    <a class="code hl_struct" href="structMotor__typedef.html">Motor_t</a> <a class="code hl_variable" href="structDualDrive__handle__typed.html#a65321ba986f2339ebd0ce0880623eeef">motor_right</a>;               <span class="comment">// Right motor configuration</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="structDualDrive__handle__typed.html#a3a0262e1762e80df665d23f10b98cec7">   80</a></span>    <a class="code hl_struct" href="structMotor__typedef.html">Motor_t</a> *<a class="code hl_variable" href="structDualDrive__handle__typed.html#a3a0262e1762e80df665d23f10b98cec7">current_motor</a>;            <span class="comment">// Pointer to the motor currently ramping</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="structDualDrive__handle__typed.html#a150b3649e7c1eabf35744c9ebf016082">   81</a></span>    TaskHandle_t <a class="code hl_variable" href="structDualDrive__handle__typed.html#a150b3649e7c1eabf35744c9ebf016082">h_task</a>;               <span class="comment">// Handle for FreeRTOS task</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="structDualDrive__handle__typed.html#a27642e312bcf30cd678173234e5e8f5b">   82</a></span>    TIM_HandleTypeDef *<a class="code hl_variable" href="structDualDrive__handle__typed.html#a27642e312bcf30cd678173234e5e8f5b">tim_encoder_sync</a>;  <span class="comment">// Timer for encoder synchronization</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno"><a class="line" href="DCMotor__driver_8h.html#ae8c12bd4f4e65a8a8600b9789f187ce4">   83</a></span>} <a class="code hl_typedef" href="DCMotor__driver_8h.html#ae8c12bd4f4e65a8a8600b9789f187ce4">DualDrive_handle_t</a>;</div>
</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="comment">/* Global Handle */</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="keyword">extern</span> <a class="code hl_struct" href="structDualDrive__handle__typed.html">DualDrive_handle_t</a> <a class="code hl_variable" href="DCMotor__driver_8h.html#a4bec4b1e1d3a367a4b56968ac0d60d07">DualDrive_handle</a>;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="comment">/* Function Prototypes */</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="keywordtype">void</span> <a class="code hl_function" href="DCMotor__driver_8h.html#acff9fac773bd31d6fa17c19447d6c2bc">DCMotor_MotorInit</a>(<a class="code hl_struct" href="structMotor__typedef.html">Motor_t</a> *motor, TIM_HandleTypeDef motor_tim,</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>                       uint32_t FWD_Channel, uint32_t REV_Channel, uint16_t max_speed);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="keywordtype">void</span> <a class="code hl_function" href="DCMotor__driver_8h.html#aab481add8a260111f0c687f0f3ba04f6">DCMotor_StartPWM</a>(<a class="code hl_struct" href="structMotor__typedef.html">Motor_t</a> *motor);</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>HAL_StatusTypeDef <a class="code hl_function" href="DCMotor__driver_8h.html#a660012143b9f6227f6efdde2dde29c4e">DCMotor_SetSpeed</a>(<a class="code hl_struct" href="structMotor__typedef.html">Motor_t</a> *motor, uint8_t speed, uint8_t rotation_sign);</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="keywordtype">void</span> <a class="code hl_function" href="DCMotor__driver_8h.html#ae1c98941fee31a5236d73830bf5781cd">DCMotor_Forward</a>(<a class="code hl_struct" href="structDualDrive__handle__typed.html">DualDrive_handle_t</a> *<a class="code hl_variable" href="DCMotor__driver_8h.html#a4bec4b1e1d3a367a4b56968ac0d60d07">DualDrive_handle</a>, uint8_t speed);</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span><span class="keywordtype">void</span> <a class="code hl_function" href="DCMotor__driver_8h.html#aed128fdeefdc8bdb27bcd8655d83744b">DCMotor_Brake</a>(<a class="code hl_struct" href="structMotor__typedef.html">Motor_t</a> *motor);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span><span class="keywordtype">void</span> <a class="code hl_function" href="DCMotor__driver_8h.html#afba83fd2cea4303648d4485c36127a2a">DCMotor_Init</a>(<a class="code hl_struct" href="structDualDrive__handle__typed.html">DualDrive_handle_t</a> *<a class="code hl_variable" href="DCMotor__driver_8h.html#a4bec4b1e1d3a367a4b56968ac0d60d07">DualDrive_handle</a>, TIM_HandleTypeDef *tim_encoder_sync);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span><span class="keywordtype">int</span> <a class="code hl_function" href="DCMotor__driver_8h.html#ad8db8fd14b006f053be1d8490a88b787">DCMotor_CreateTask</a>(<a class="code hl_struct" href="structDualDrive__handle__typed.html">DualDrive_handle_t</a> *<a class="code hl_variable" href="DCMotor__driver_8h.html#a4bec4b1e1d3a367a4b56968ac0d60d07">DualDrive_handle</a>);</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span><span class="keywordtype">void</span> <a class="code hl_function" href="DCMotor__driver_8h.html#a6936fa16c3a78a8c2a6a8993096d9977">DCMotor_PulseRamp</a>(<a class="code hl_struct" href="structMotor__typedef.html">Motor_t</a> *motor);</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span><span class="keywordtype">void</span> <a class="code hl_function" href="DCMotor__driver_8h.html#af964c38d2ed457543c79ed58a2e5fa02">DCMotor_EncoderCallback</a>(TIM_HandleTypeDef *tim, <a class="code hl_struct" href="structDualDrive__handle__typed.html">DualDrive_handle_t</a> *<a class="code hl_variable" href="DCMotor__driver_8h.html#a4bec4b1e1d3a367a4b56968ac0d60d07">DualDrive_handle</a>);</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span><span class="preprocessor">#endif </span><span class="comment">/* DCMOTOR_DRIVER_H_ */</span><span class="preprocessor"></span></div>
<div class="ttc" id="aDCMotor__driver_8h_html_a1a35c47ab80511f4ca296f7b278df9dd"><div class="ttname"><a href="DCMotor__driver_8h.html#a1a35c47ab80511f4ca296f7b278df9dd">Motor_t</a></div><div class="ttdeci">struct Motor_typedef Motor_t</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_a4bec4b1e1d3a367a4b56968ac0d60d07"><div class="ttname"><a href="DCMotor__driver_8h.html#a4bec4b1e1d3a367a4b56968ac0d60d07">DualDrive_handle</a></div><div class="ttdeci">DualDrive_handle_t DualDrive_handle</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_a660012143b9f6227f6efdde2dde29c4e"><div class="ttname"><a href="DCMotor__driver_8h.html#a660012143b9f6227f6efdde2dde29c4e">DCMotor_SetSpeed</a></div><div class="ttdeci">HAL_StatusTypeDef DCMotor_SetSpeed(Motor_t *motor, uint8_t speed, uint8_t rotation_sign)</div><div class="ttdoc">Set speed and direction for a motor.</div><div class="ttdef"><b>Definition</b> DCMotor_driver.c:109</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_a6936fa16c3a78a8c2a6a8993096d9977"><div class="ttname"><a href="DCMotor__driver_8h.html#a6936fa16c3a78a8c2a6a8993096d9977">DCMotor_PulseRamp</a></div><div class="ttdeci">void DCMotor_PulseRamp(Motor_t *motor)</div><div class="ttdoc">Ramp the PWM pulse for a motor.</div><div class="ttdef"><b>Definition</b> DCMotor_driver.c:298</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_a918f0616e8ba7540c87c987b737e465a"><div class="ttname"><a href="DCMotor__driver_8h.html#a918f0616e8ba7540c87c987b737e465a">Encoder_t</a></div><div class="ttdeci">struct Encoder_typedef Encoder_t</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_aab481add8a260111f0c687f0f3ba04f6"><div class="ttname"><a href="DCMotor__driver_8h.html#aab481add8a260111f0c687f0f3ba04f6">DCMotor_StartPWM</a></div><div class="ttdeci">void DCMotor_StartPWM(Motor_t *motor)</div><div class="ttdoc">Start PWM for the motor.</div><div class="ttdef"><b>Definition</b> DCMotor_driver.c:71</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_acff9fac773bd31d6fa17c19447d6c2bc"><div class="ttname"><a href="DCMotor__driver_8h.html#acff9fac773bd31d6fa17c19447d6c2bc">DCMotor_MotorInit</a></div><div class="ttdeci">void DCMotor_MotorInit(Motor_t *motor, TIM_HandleTypeDef motor_tim, uint32_t FWD_Channel, uint32_t REV_Channel, uint16_t max_speed)</div><div class="ttdoc">Initialize a single motor.</div><div class="ttdef"><b>Definition</b> DCMotor_driver.c:35</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_ad8db8fd14b006f053be1d8490a88b787"><div class="ttname"><a href="DCMotor__driver_8h.html#ad8db8fd14b006f053be1d8490a88b787">DCMotor_CreateTask</a></div><div class="ttdeci">int DCMotor_CreateTask(DualDrive_handle_t *DualDrive_handle)</div><div class="ttdoc">Create a task for motor control.</div><div class="ttdef"><b>Definition</b> DCMotor_driver.c:273</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_ae1c98941fee31a5236d73830bf5781cd"><div class="ttname"><a href="DCMotor__driver_8h.html#ae1c98941fee31a5236d73830bf5781cd">DCMotor_Forward</a></div><div class="ttdeci">void DCMotor_Forward(DualDrive_handle_t *DualDrive_handle, uint8_t speed)</div><div class="ttdoc">Move both motors forward at a specified speed.</div><div class="ttdef"><b>Definition</b> DCMotor_driver.c:162</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_ae8c12bd4f4e65a8a8600b9789f187ce4"><div class="ttname"><a href="DCMotor__driver_8h.html#ae8c12bd4f4e65a8a8600b9789f187ce4">DualDrive_handle_t</a></div><div class="ttdeci">struct DualDrive_handle_typed DualDrive_handle_t</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_aed128fdeefdc8bdb27bcd8655d83744b"><div class="ttname"><a href="DCMotor__driver_8h.html#aed128fdeefdc8bdb27bcd8655d83744b">DCMotor_Brake</a></div><div class="ttdeci">void DCMotor_Brake(Motor_t *motor)</div><div class="ttdoc">Apply a brake to the motor.</div><div class="ttdef"><b>Definition</b> DCMotor_driver.c:150</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_af964c38d2ed457543c79ed58a2e5fa02"><div class="ttname"><a href="DCMotor__driver_8h.html#af964c38d2ed457543c79ed58a2e5fa02">DCMotor_EncoderCallback</a></div><div class="ttdeci">void DCMotor_EncoderCallback(TIM_HandleTypeDef *tim, DualDrive_handle_t *DualDrive_handle)</div><div class="ttdoc">Encoder callback to calculate RPM and direction.</div><div class="ttdef"><b>Definition</b> DCMotor_driver.c:259</div></div>
<div class="ttc" id="aDCMotor__driver_8h_html_afba83fd2cea4303648d4485c36127a2a"><div class="ttname"><a href="DCMotor__driver_8h.html#afba83fd2cea4303648d4485c36127a2a">DCMotor_Init</a></div><div class="ttdeci">void DCMotor_Init(DualDrive_handle_t *DualDrive_handle, TIM_HandleTypeDef *tim_encoder_sync)</div><div class="ttdoc">Initialize the dual drive system.</div><div class="ttdef"><b>Definition</b> DCMotor_driver.c:86</div></div>
<div class="ttc" id="astructDualDrive__handle__typed_html"><div class="ttname"><a href="structDualDrive__handle__typed.html">DualDrive_handle_typed</a></div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:77</div></div>
<div class="ttc" id="astructDualDrive__handle__typed_html_a150b3649e7c1eabf35744c9ebf016082"><div class="ttname"><a href="structDualDrive__handle__typed.html#a150b3649e7c1eabf35744c9ebf016082">DualDrive_handle_typed::h_task</a></div><div class="ttdeci">TaskHandle_t h_task</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:81</div></div>
<div class="ttc" id="astructDualDrive__handle__typed_html_a27642e312bcf30cd678173234e5e8f5b"><div class="ttname"><a href="structDualDrive__handle__typed.html#a27642e312bcf30cd678173234e5e8f5b">DualDrive_handle_typed::tim_encoder_sync</a></div><div class="ttdeci">TIM_HandleTypeDef * tim_encoder_sync</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:82</div></div>
<div class="ttc" id="astructDualDrive__handle__typed_html_a3a0262e1762e80df665d23f10b98cec7"><div class="ttname"><a href="structDualDrive__handle__typed.html#a3a0262e1762e80df665d23f10b98cec7">DualDrive_handle_typed::current_motor</a></div><div class="ttdeci">Motor_t * current_motor</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:80</div></div>
<div class="ttc" id="astructDualDrive__handle__typed_html_a65321ba986f2339ebd0ce0880623eeef"><div class="ttname"><a href="structDualDrive__handle__typed.html#a65321ba986f2339ebd0ce0880623eeef">DualDrive_handle_typed::motor_right</a></div><div class="ttdeci">Motor_t motor_right</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:79</div></div>
<div class="ttc" id="astructDualDrive__handle__typed_html_aafcda8b5aeeed7e4d5fba443b297a540"><div class="ttname"><a href="structDualDrive__handle__typed.html#aafcda8b5aeeed7e4d5fba443b297a540">DualDrive_handle_typed::motor_left</a></div><div class="ttdeci">Motor_t motor_left</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:78</div></div>
<div class="ttc" id="astructEncoder__typedef_html"><div class="ttname"><a href="structEncoder__typedef.html">Encoder_typedef</a></div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:51</div></div>
<div class="ttc" id="astructEncoder__typedef_html_a208d84c653860e564c9ac25a4d34732e"><div class="ttname"><a href="structEncoder__typedef.html#a208d84c653860e564c9ac25a4d34732e">Encoder_typedef::measured_rotation_sign</a></div><div class="ttdeci">int measured_rotation_sign</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:53</div></div>
<div class="ttc" id="astructEncoder__typedef_html_a5a1c3b3780efba3045829bf319f31a21"><div class="ttname"><a href="structEncoder__typedef.html#a5a1c3b3780efba3045829bf319f31a21">Encoder_typedef::measured_rpm</a></div><div class="ttdeci">uint32_t measured_rpm</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:52</div></div>
<div class="ttc" id="astructEncoder__typedef_html_a922111eef7fe2195001f009c725e8fec"><div class="ttname"><a href="structEncoder__typedef.html#a922111eef7fe2195001f009c725e8fec">Encoder_typedef::current_count</a></div><div class="ttdeci">uint16_t current_count</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:55</div></div>
<div class="ttc" id="astructEncoder__typedef_html_acca64aa9212a24efa411cd4a2b2f73a3"><div class="ttname"><a href="structEncoder__typedef.html#acca64aa9212a24efa411cd4a2b2f73a3">Encoder_typedef::encoder_timer</a></div><div class="ttdeci">TIM_HandleTypeDef encoder_timer</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:56</div></div>
<div class="ttc" id="astructEncoder__typedef_html_aec1e953fef34b6eaa94d4d18b96ccd1f"><div class="ttname"><a href="structEncoder__typedef.html#aec1e953fef34b6eaa94d4d18b96ccd1f">Encoder_typedef::previous_count</a></div><div class="ttdeci">uint16_t previous_count</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:54</div></div>
<div class="ttc" id="astructMotor__typedef_html"><div class="ttname"><a href="structMotor__typedef.html">Motor_typedef</a></div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:61</div></div>
<div class="ttc" id="astructMotor__typedef_html_a007083cb089e71887fbfbd26abcc35e2"><div class="ttname"><a href="structMotor__typedef.html#a007083cb089e71887fbfbd26abcc35e2">Motor_typedef::set_rotation_sign</a></div><div class="ttdeci">int set_rotation_sign</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:63</div></div>
<div class="ttc" id="astructMotor__typedef_html_a0e428266bbf6976126fb30af3a1f112c"><div class="ttname"><a href="structMotor__typedef.html#a0e428266bbf6976126fb30af3a1f112c">Motor_typedef::REV_Channel</a></div><div class="ttdeci">uint32_t REV_Channel</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:66</div></div>
<div class="ttc" id="astructMotor__typedef_html_a1076f7e891560898cff2078ae6db06b4"><div class="ttname"><a href="structMotor__typedef.html#a1076f7e891560898cff2078ae6db06b4">Motor_typedef::FWD_target_pulse</a></div><div class="ttdeci">uint16_t FWD_target_pulse</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:67</div></div>
<div class="ttc" id="astructMotor__typedef_html_a33663d34dfe9c8c5e831b932ae3dafd4"><div class="ttname"><a href="structMotor__typedef.html#a33663d34dfe9c8c5e831b932ae3dafd4">Motor_typedef::REV_target_pulse</a></div><div class="ttdeci">uint16_t REV_target_pulse</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:68</div></div>
<div class="ttc" id="astructMotor__typedef_html_a3b544cdad259cf9e69bef2e4a205a468"><div class="ttname"><a href="structMotor__typedef.html#a3b544cdad259cf9e69bef2e4a205a468">Motor_typedef::motor_timer</a></div><div class="ttdeci">TIM_HandleTypeDef motor_timer</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:64</div></div>
<div class="ttc" id="astructMotor__typedef_html_a53f848a9a4da51c49f47e3ceb75c636f"><div class="ttname"><a href="structMotor__typedef.html#a53f848a9a4da51c49f47e3ceb75c636f">Motor_typedef::set_rpm</a></div><div class="ttdeci">uint32_t set_rpm</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:62</div></div>
<div class="ttc" id="astructMotor__typedef_html_a9afa363700ee1bb8dee2a4052f052d30"><div class="ttname"><a href="structMotor__typedef.html#a9afa363700ee1bb8dee2a4052f052d30">Motor_typedef::FWD_current_pulse</a></div><div class="ttdeci">uint16_t FWD_current_pulse</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:69</div></div>
<div class="ttc" id="astructMotor__typedef_html_a9ded8689a4e3c8bf635962e283ecb6fa"><div class="ttname"><a href="structMotor__typedef.html#a9ded8689a4e3c8bf635962e283ecb6fa">Motor_typedef::max_speed</a></div><div class="ttdeci">uint16_t max_speed</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:72</div></div>
<div class="ttc" id="astructMotor__typedef_html_aad475504ca555839c47b2eb179ffbe61"><div class="ttname"><a href="structMotor__typedef.html#aad475504ca555839c47b2eb179ffbe61">Motor_typedef::FWD_Channel</a></div><div class="ttdeci">uint32_t FWD_Channel</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:65</div></div>
<div class="ttc" id="astructMotor__typedef_html_acdd5fb16e2dfaed8593fc0ab266ee404"><div class="ttname"><a href="structMotor__typedef.html#acdd5fb16e2dfaed8593fc0ab266ee404">Motor_typedef::encoder</a></div><div class="ttdeci">Encoder_t encoder</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:71</div></div>
<div class="ttc" id="astructMotor__typedef_html_adc89a81286c2283a3eb90fcc04be1056"><div class="ttname"><a href="structMotor__typedef.html#adc89a81286c2283a3eb90fcc04be1056">Motor_typedef::REV_current_pulse</a></div><div class="ttdeci">uint16_t REV_current_pulse</div><div class="ttdef"><b>Definition</b> DCMotor_driver.h:70</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2f117550a63961c477d5fa39a535f353.html">CubeIDE</a></li><li class="navelem"><a class="el" href="dir_d6e749d207866ab47aefbfae481050c9.html">TagBot</a></li><li class="navelem"><a class="el" href="dir_336dd91b9395692d31d00cd84cabc7c6.html">libs</a></li><li class="navelem"><a class="el" href="DCMotor__driver_8h.html">DCMotor_driver.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
